# x199 - Control Node Services

Automation and orchestration services for the homelab infrastructure.

## Services

| Service | Port | Description |
|---------|------|-------------|
| caddy | 80, 443 | Reverse proxy with auto-HTTPS |
| semaphore | 3001 | Ansible automation UI |
| webhook | 8097 | GitHub webhook handler |

## Quick Start

Bootstrap a fresh machine as control node:

```bash
git clone https://github.com/PawelWywiol/homelab.git
cd homelab
cp bootstrap.env.example .env
nano .env  # Configure required values
./bootstrap.sh
```

## Usage

```bash
cd pve/x199

# Manage services
make caddy up|down|restart|pull|logs
make semaphore up|down|restart|pull|logs
make webhook up|down|restart|pull|logs

# Generate random secret
make random

# Show help
make help
```

## Structure

```
pve/x199/
├── Makefile
├── .envrc
├── README.md
└── docker/config/
    ├── caddy/
    │   ├── compose.yml
    │   ├── Caddyfile.template
    │   ├── Caddyfile          # Generated by bootstrap.sh
    │   ├── .env
    │   └── .env.example
    ├── semaphore/
    │   ├── compose.yml
    │   ├── .env
    │   └── .env.example
    └── webhook/
        ├── compose.yml
        ├── hooks.yml
        ├── .env
        ├── .env.example
        └── scripts/
```

## Documentation

- [Webhook Service](docker/config/webhook/README.md) - GitHub webhook configuration
- [Automation Guide](../../docs/automation/ansible-opentofu-automation.md) - Full automation setup
- [Bootstrap Script](../../bootstrap.sh) - Control node setup
